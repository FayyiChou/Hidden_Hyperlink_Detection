<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN"><head><meta http-equiv="Content-type" content="text/html;charset=utf-8;"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>iframe communication</title><script type="text/javascript" src="http://images.koolearn.com/www/subject/script/jquery-1.8.2.min.js"></script><script type="text/javascript" src="http://images.koolearn.com/www/subject/script/messenger.min.js"></script><script type="text/javascript" src="http://images.koolearn.com/www/subject/script/jquery.cookie.min.js"></script><script type="text/javascript" src="http://images.koolearn.com/www/subject/script/json2.min.js"></script></head><body><script>function getDate(e){function t(e){return e+"".length<10&&(e="0"+e),e}var e=e.getFullYear()+""+t(e.getMonth()+1)+t(e.getDate())+t(e.getHours())+t(e.getMinutes())+t(e.getSeconds());return e}function getCirCookie(){setInterval(function(){cook.setCookie("closeTime",{pub:newobj,lt:getDate(new Date)})},time*1e3)}function send(e){url="/a",$.post(url,{p:e},function(e){},"html")}var time=2,messenger=new Messenger("KoolearnIframe"),cook={setCookie:function(e,t){var t=JSON.stringify(t);$.cookie(e,t,{expires:7,path:"/"})},getCookie:function(e){return JSON.parse($.cookie(e))}},newobj="";if($.cookie("closeTime")){var oldCookie=cook.getCookie("closeTime");if(getDate(new Date)-parseInt(oldCookie.lt)>time){var co=oldCookie,p=JSON.stringify({target:2,pub:co.pub,obj:[{lt:co.lt}]});send(p)}}messenger.listen(function(e){var t=e.split("@"),n=t[0],r=t[1],i=t[2];newobj||(newobj=JSON.parse(r),getCirCookie());var s=JSON.stringify({target:n,pub:JSON.parse(r),obj:JSON.parse(i)});send(s)})</script></body></html>