<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <title>二手房交易平台</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link rel="shortcut icon" href="/favicon.ico">
    <!-- BEGIN CORE PLUGINS -->
    <!--[if IE 6]>
    <script src='http://esf.js.soufunimg.com/esf/eb/Public//assets/scripts/png.js?v=201701201811'></script>
    <script>
        DD_belatedPNG.fix('.png_bg,img,.b');
    </script>
    <![endif]-->
    <!-- END CORE PLUGINS -->
    <style type="text/css">
        /*yin*/

        .a_SendMessage_Able {
            cursor: pointer;
        }

        .a_SendMessage_Disable {
            color: #666;
            cursor: default;
        }

        .btn_disable {
            background-color: #e2e2e2 !important;
            cursor: default !important;
        }
    </style>

<style>
/* base css */
    * {margin: 0;padding: 0; }
    body {background: #fff;font: 12px/20px 'Microsoft YaHei';color: #333; }
    a {color: #0da3e2;text-decoration: none;}a:hover { text-decoration: underline; }a img { border: 0; }
    ol, ul, li { list-style-type: none; }
    .clear { clear: both; }
    .container {max-width: 960px;_width: 960px;padding: 0 20px;margin: 0 auto;}
    .header {height: 60px;padding-top: 30px;}
    .header, .header a { color: #333; }
    .header .logo {font: 28px/50px 'Microsoft YaHei';float: left;}
    .header .nav {float: right;margin-top: 20px;}
    .header .nav, .header .nav a {color: #666;text-align: right;}
    .loginbk { background: url(http://esf.js.soufunimg.com/esf/eb/Public//assets/img/loginbk.jpg?v=201701201811) 100% 90px repeat-x; }
    .login {width: 250px;min-height: 300px;background: #fff;padding: 30px 40px;float: right;margin: 60px 0 65px;filter: progid:DXImageTransform.Microsoft.Shadow(color=#333, direction=120, strength=3); /*ie*/-moz-box-shadow: 3px 3px 5px #666; /*firefox*/-webkit-box-shadow: 2px 2px 10px #666; /*safari或chrome*/box-shadow: 2px 2px 10px #666; /*opera或ie9*/);background: rgba(255, 255, 255, 0.9) !important;background: #fff;filter: Alpha(opacity=90); }
    .login h2 { font: 24px/30px 'Microsoft YaHei'; }
    .login li {display: block;margin-top: 15px;position: relative;}
    .login .input, .login .input1 {font: 14px/22px 'Microsoft YaHei';padding: 7px;border: 1px solid #bbb;}.login .input1 { color: #999; }
    .login .input:active, .login .input:hover, .login .input1:active, .login .input1:hover {padding: 7px;border: 1px solid #888;background: #ffffe1;}
    .btn {font: 15px/20px 'Microsoft YaHei';padding: 8px 15px;background: #4d90fe;color: #fff;border: none;cursor: pointer;}
    .btn.blue:hover { background-color: #0362fd; }
    .footer {padding: 10px 0;color: #666;text-align: right;}
    .errorInput { border: 1px solid red !important; }
    .errorMsg { color: red; }
    .tips {background: #f5f5f5;color: #333;border: 1px solid #e9e9e9;margin: 10px;padding: 5px 10px;}
    .close {height: 15px;width: 15px;background: url(http://esf.js.soufunimg.com/esf/eb/Public//assets/img/remove-icon-small.png?v=201701201811) no-repeat !important;cursor: pointer;color: #000;float: right;font: bold 20px/20px Arial;opacity: 0.3;border: none;}
    .close:hover { opacity: 0.5; }
    .password-text { overflow: hidden; }
    .password-text label { float: left; }
    .password-text span { float: right; }
</style></head>


<body class="loginbk" style="">
    <div id="baseLoadingContent" style="display: none">
        <img src="http://esf.js.soufunimg.com/esf/eb/Public/assets/img/ajax-loading.gif?v=201701201811">
    </div>
    <div class="container">
        <div class="header">
            <div class="logo">
                <img src="http://esf.js.soufunimg.com/esf/eb/Public//assets/img/logo20140923.png?v=201701201811" alt="" align="top" style=" *vertical-align:middle">
                二手房交易平台
            </div>
            <div class="nav"><a href="#"></a></div>
        </div>
<form action="/ELogin/ELogin/DoLogin" autocomplete="off" class="form-vertical login-form" id="formLogin" method="post" novalidate="novalidate">            <div style="display: none;">
                <a href="/House">房源管理</a>
                <a href="http://b.eb.test.fang.com/House">房源管理</a>
                <a href="/House/housefollow/followlist">房源跟进</a>
                <a href="http://b.eb.test.fang.com/House/housefollow/followlist">房源跟进</a>
            </div>
            <ul class="login">
                <h2>用户登录</h2>
                <li>
                    <input class="input1 placeholder" type="text" placeholder="用户名" value="用户名" name="UserName" data-rule-required="true" data-msg-required="请输入用户名" data-rule-rangelength="[1,30]" data-msg-rangelength="{0}-{1}个字符" id="str_username" style="width: 240px;" tabindex="1">
                </li>
                <li>
                    <input name="Password" type="hidden" id="str_userpwd">
                    <div id="dvChrome" style="">
                        <input autocomplete="off" type="password" class="input1 placeholder" placeholder="密码" data-rule-required="true" data-msg-required="请输入密码" data-rule-rangelength="[6,30]" data-msg-rangelength="{0}-{1}个字符" id="str_up" tabindex="2" style="width: 240px;"><input class="input1 placeholder" type="password" placeholder="密码" autocomplete="off" onfocus=" if (this.value= ='密码' ) {this.value='' ;this.className='input placeholder' } " onblur=" if (this.value= ='' ) {this.value='密码' ;this.className='input1 placeholder' } " data-rule-required="true" data-msg-required="请输入密码" data-rule-rangelength="[6,30]" data-msg-rangelength="{0}-{1}个字符" id="str_up2" tabindex="2" style="width: 240px; display: none;">
                    </div>
                    <div id="dvIE" style="display: none; ">
                        <input class="input1 placeholder" type="text" placeholder="密码" onfocus=" if (this.value= ='密码' ) {this.value='' ;this.className='input placeholder' } " onblur=" if (this.value= ='' ) {this.value='密码' ;this.className='input1 placeholder' } " data-rule-required="true" data-msg-required="请输入密码" data-rule-rangelength="[6,30]" data-msg-rangelength="{0}-{1}个字符" id="txtpasswd" tabindex="2" style="width: 240px;"><input class="input1 placeholder" type="password" placeholder="密码" autocomplete="off" onfocus=" if (this.value= ='密码' ) {this.value='' ;this.className='input placeholder' } " onblur=" if (this.value= ='' ) {this.value='密码' ;this.className='input1 placeholder' } " data-rule-required="true" data-msg-required="请输入密码" data-rule-rangelength="[6,30]" data-msg-rangelength="{0}-{1}个字符" id="str_upie" tabindex="2" style="width: 240px; display: none;">
                    </div>
                </li>

                <li id="uloginSelfVerifyCodeLi" style="display: none; ">
                    <input name="VID" value="1352C741E5DC145F74C16F4348621FC61BFA0DC128ED764504AE57520A055B7008A32F89ADD10A1A" type="hidden" id="login_vid_hid">
                    <input name="VCode" autocomplete="off" class="input1 placeholder aosvalidignore" placeholder="验证码" data-rule-required="true" data-msg-required="请输入验证码" data-rule-length="4" data-msg-length="验证码错误" id="login_vCode_input" tabindex="3" style="width: 138px;">
                    <img id="login_vCode_img" src="/Common/Img/VCode?vid=1352C741E5DC145F74C16F4348621FC61BFA0DC128ED764504AE57520A055B7008A32F89ADD10A1A" style="width: 52px; vertical-align: bottom; height: 38px;">
                    <a id="login_refreshVcode_a" style="cursor: pointer; text-decoration: none">换一张</a>
                </li>

                <li id="uloginPassportVerifyCodeLi" style="display: none; ">

                    <input autocomplete="off" class="input1 placeholder aosvalidignore" placeholder="验证码" data-rule-required="true" data-msg-required="请输入验证码" data-rule-length="4" data-msg-length="验证码错误" id="login_passportvCode_input" tabindex="3" style="width: 138px;">
                    <img id="login_passportvCode_img" style="width: 52px; vertical-align: bottom; height: 38px;">
                    <a id="login_refreshpassportVcode_a" style="cursor: pointer; text-decoration: none">换一张</a>
                </li>
                <li class="password-text">
                    <label>
                        <input type="checkbox" name="Rememberme" id="rememberme" tabindex="4" value="true">
                        记住我的用户名
                    </label>
                    <span><a href="http://agent.fang.com/ForgetPasswordNew.aspx" target="_blank">忘记密码</a></span>
                </li>
                <li>
                    <button type="button" onclick="OnSubmit();" id="login_submit" class="btn blue" style="width: 260px;">登 录 </button>
                </li>
                <li>
                    <a href="https://passport.fang.com/?backurl=http%3a%2f%2fe.agent.fang.com%2facc%2fjump">手机登录</a>
                </li>
                
                    <li>请大连用户使用“<a href="http://work.fang.com/v2/login/loginAct.do?method=login" target="_blank">OA办公系统</a>”登录</li>
                
                <li id="liErrorMsg" class="errorMsg" style="display: block">请先登录</li>
            </ul>
</form>
        <form id="form_PhoneAndMessage" class="form-vertical" method="post" autocomplete="off" novalidate="novalidate" style="display: none">
            <ul class="login">

                <h2>身份验证</h2>

                <li>
                    <input id="form_PhoneAndMessage_UserName" name="UserName" type="hidden" value="">
                    <input id="form_PhoneAndMessage_Password" name="Password" type="hidden" value="">
                </li>

                <li>
                    <input id="str_phone" name="PhoneNum" class="input1 placeholder" type="text" placeholder="手机号" onfocus=" if (this.value= ='手机号' ) { this.value='' ; this.className='input placeholder' }" onblur=" if (this.value= ='' ) { this.value='手机号' ; this.className='input1 placeholder' } " value="手机号" data-rule-required="true" data-msg-required="请输入手机号" data-rule-rangelength="[1,30]" data-msg-rangelength="{0}-{1}个字符" style="width: 240px;" tabindex="1">
                </li>

                <li>
                    <input id="str_message" name="MessagePwd" autocomplete="off" class="input1 placeholder aosvalidignore" placeholder="请查看并输入短信密码" data-rule-required="false" data-msg-required="请输入短信密码" data-rule-length="10" maxlength="6" tabindex="3" style="width: 144px;">
                    <a id="str_message_a" class="a_SendMessage_Able" style="text-decoration: none">发送短信验证码</a>
                </li>
                <li>
                    <button type="button" onclick="ValidatePhoneAndMessage();" id="btn_ValidatePhoneAndMessage" class="btn" style="width: 260px;"> 验 证 </button>
                </li>
                <li id="ValidatePhoneErrorMsg" class="errorMsg"></li>
            </ul>
        </form>



        <div style="margin-top: 0px; float: left; padding-top: 97px; width: 500px; height: 300px">
            <div style="width: 100%; text-align: center"><span style="color: rgb(164, 0, 0); font: 27px 'Microsoft YaHei'">5.5.0版本上线了，请立即扫码升级</span></div>
            <div style="width: 100%; text-align: center; margin-top: 30px; position: relative;">
                <img src="http://esf.js.soufunimg.com/esf/eb/Public/assets/img/AD-ebAPPQR.png?v=201701201811">
                <div style="display: block; width: 100%; position: absolute; bottom: 24px; left: 0px; font-size: 16px; text-align: center; font-family: arial; z-index: 10">
                    <span>Iphone/Android: v 5.5.0</span>
                </div>

            </div>
        </div>
        <div class="clear"></div>
        <div class="footer">
            Copyright © 2017 SouFun.com Limited, All Rights Reserved. 搜房公司 版权所有
        </div>

    </div>
    <div class="tips" id="ShiPei" style="display: none;">
        <button data-dismiss="alert" class="close" onclick="CloseShipei()"></button>
        <strong>温馨提示：</strong> 尊敬的用户，您好！平台发现您正使用非推荐浏览器，建议您使
        <a href="http://dlsw.baidu.com/sw-search-sp/soft/9d/14744/ChromeStandalone_V43.0.2357.81_Setup.1432608296.exe">谷歌浏览器Chrome</a> 来访问平台避免操作风险，祝您操作愉快!
    </div>
    <script src="http://esf.js.soufunimg.com/esf/eb/Public//assets/plugins/jquery-1.10.1.min.js?v=201701201811" type="text/javascript"></script>
    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/eb/Public/assets/plugins/jquery-validation/dist/jquery.validate.js?v=201701201811"></script>

    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/sfb/magent/js/jQuery.md5.js?v=201701201811"></script>
    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/sfb/magent/js/BigInt.js?v=201701201811"></script>
    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/sfb/magent/js/RSA.js?v=201701201811"></script>
    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/sfb/magent/js/Barrett.js?v=201701201811"></script>
    <script type="text/javascript" src="http://esf.js.soufunimg.com/esf/eb/Public/assets/plugins/jquery.cookie.min.js?v=201701201811"></script>
    <script type="text/javascript" src="https://jsimg.fang.com/passport/js/RSA.min.js"></script>
    <script type="text/javascript">

        $(function () {
            $("#str_username").on("focus", function () {
                if (this.value == '用户名') {
                    this.value = ''; 
                    this.className = 'input placeholder'
                }
            });
            $("#str_username").on("blur", function () {
                if (this.value == '')
                {
                    this.value = '用户名';
                    this.className = 'input1 placeholder'
                }
            });
            window.setTimeout(function () {
                $("#str_up").removeAttr("readonly");
            }, 500);


            var agent = navigator.userAgent.toLowerCase();
            if (agent.indexOf("chrome") > 0) {
                $("#dvIE").hide();
                $("#dvChrome").show();
            }
            else {
                $("#dvIE").show();
                $("#dvChrome").hide();
                $("#txtpasswd").val("密码");

                $("#txtpasswd").focus(function () {
                    $(this).hide();

                    $("#str_upie").val("").show().focus();
                });
                $("#str_upie").blur(function () {
                    if (($(this).val() == "" || $(this).val() == "密码")) {
                        $(this).hide();
                        $("#txtpasswd").show();
                    }
                });
            }
        });

        var isready = false;
        function OnSubmit() {
            if (isready && $('.login-form').valid()) {
                $('.login-form').submit();
            }
        }
        var remberNameCookie = "sfebrembName";
        $(function () {
            var changeValidCode = function (vType) {

                if (vType == 'self') {
                    $("#login_refreshVcode_a").trigger("click");
                    $("#uloginSelfVerifyCodeLi").show();
                    $("#login_vCode_input").removeClass("aosvalidignore");
                    $("#uloginPassportVerifyCodeLi").hide();
                    $("#login_passportvCode_input").addClass("aosvalidignore");
                    return;
                }
                if (vType == 'pass') {
                    $("#login_refreshpassportVcode_a").trigger("click");
                    $("#uloginPassportVerifyCodeLi").show();
                    $("#login_passportvCode_input").removeClass("aosvalidignore");
                    $("#uloginSelfVerifyCodeLi").hide();
                    $("#login_vCode_input").addClass("aosvalidignore");
                    return;

                }
                $("#uloginPassportVerifyCodeLi,#uloginSelfVerifyCodeLi").hide();
                $("#login_passportvCode_input,#login_vCode_input").addClass("aosvalidignore");
            };

            $.cookie("EB_LoginTime", "");


            $("#login_refreshVcode_a").on("click", function () {
                $("#login_vCode_img").attr("src", $("#login_vCode_img").attr("src") + "&s=" + (+(new Date())));
            });
            $("#login_refreshpassportVcode_a").on("click", function () {
                $("#login_passportvCode_img").attr("src", "http://captchas.fang.com/Display?type=passportlogin&width=100&height=32&r=" + (+(new Date())));
            });

            $("#str_username").on("change", function () {


                var username = $("#str_username").val();

                if (username) {

                    if (username.indexOf("@") > -1) {

                        if ($("#uloginSelfVerifyCodeLi").is(':hidden')) {
                            changeValidCode("self");

                        }
                    } else {

                        changeValidCode();
                    }
                }
            });




            $("#str_username,#str_up,#login_vCode_input,#str_upie,#login_vCode_input,#login_passportvCode_input").keydown(function (e) {
                if (e.which == 13) {
                    if ($('.login-form').valid()) {
                        $('.login-form').submit();
                    }
                    return false;
                }
                $("#liErrorMsg").hide();
            });
            try {
                if ($.cookie(remberNameCookie)) {
                    $("#str_username").val($.cookie(remberNameCookie));

                    $("#rememberme").attr("checked", "checked");
                } else {

                }
            } catch (e12) {

            }
            //浏览器记住用户名密码的情况下,和记住用户名的情况
            $("#str_username").trigger("change");
            $("#formLogin").validate({

                errorElement: 'label', //default input error message container
                errorClass: 'help-inline', // default input error message class
                highlight: function (element) { // hightlight error inputs
                    $(element).addClass('errorInput'); // set error class to the control group
                },
                unhighlight: function (element) {
                    $(element).removeClass('errorInput');
                },
                success: function (label) {
                    label.remove();
                },
                errorPlacement: function (error, element) {
                    if (element.attr("id") == "login_vCode_input") {
                        element = $("#login_refreshVcode_a");
                    }
                    error.addClass('help-small no-left-padding').insertAfter(element);
                },
                submitHandler: function (form) {

                    try {
                        if ($("#rememberme").prop("checked")) {
                            $.cookie(remberNameCookie, $("#str_username").val(), { path: '/', expires: 1000 });
                        } else {
                            $.cookie(remberNameCookie, '', { path: '/' });
                        }
                    } catch (eee) {

                    }
                    //邮箱
                    if ($("#str_username").val().indexOf('@') > -1) {


                        setMaxDigits(129);


                        var key = new RSAKeyPair("010001", "", "978C0A92D2173439707498F0944AA476B1B62595877DD6FA87F6E2AC6DCB3D0BF0B82857439C99B5091192BC134889DFF60C562EC54EFBA4FF2F9D55ADBCCEA4A2FBA80CB398ED501280A007C83AF30C3D1A142D6133C63012B90AB26AC60C898FB66EDC3192C3EC4FF66925A64003B72496099F4F09A9FB72A2CF9E4D770C41");
                        var inputpd = "";
                        var agent = navigator.userAgent.toLowerCase();
                        if (agent.indexOf("chrome") > 0) {
                            inputpd = $("#str_up").val();
                        } else {
                            inputpd = $("#str_upie").val();
                        }
                        var usepwd = encryptedString(key, inputpd);
                        $("#str_userpwd").val(usepwd);
                        //form.submit();
                        ajax_form($("#formLogin").serialize());//yin
                    } else {//通行证
                        var inputpd = "";
                        var agent = navigator.userAgent.toLowerCase();
                        if (agent.indexOf("chrome") > 0) {
                            inputpd = $("#str_up").val();
                        } else {
                            inputpd = $("#str_upie").val();
                        }
                        var key_to_encode = new RSAKeyPair("010001", "", "978C0A92D2173439707498F0944AA476B1B62595877DD6FA87F6E2AC6DCB3D0BF0B82857439C99B5091192BC134889DFF60C562EC54EFBA4FF2F9D55ADBCCEA4A2FBA80CB398ED501280A007C83AF30C3D1A142D6133C63012B90AB26AC60C898FB66EDC3192C3EC4FF66925A64003B72496099F4F09A9FB72A2CF9E4D770C41");
                        var pwdnew = encryptedString(key_to_encode, inputpd);

                        var authParams = {};
                        authParams["Uid"] = $("#str_username").val();
                        authParams["Pwd"] = pwdnew;
                        authParams["vcode"] = $("#login_passportvCode_input").val();
                        authParams["Service"] = 'esf-secondhouse-web';
                        if ($("#login_submit").data("sfRuning") == "1") {
                            return;
                        }
                        $("#login_submit").data("sfRuning", 1);
                        $.ajax({
                            url: "https://passport.fang.com/login.api",
                            type: "GET",
                            dataType: 'jsonp',
                            jsonp: 'Callback',
                            data: authParams,
                            timeout: 10000,

                            success: function (result) {
                                $("#login_submit").data("sfRuning", 0);
                                if (result.Message == 'Success') {
                                    window.location = '/acc/jump?gt=' + result.UserName + "&backUrl=http%3a%2f%2fb.e.agent.fang.com%2fHome";
                                } else {
                                    $("#liErrorMsg").html(result.Tip);
                                    $("#liErrorMsg").show();
                                    if (result.LoginErrorCount >= 5) {
                                        if ($("#uloginPassportVerifyCodeLi").is(':hidden')) {
                                            changeValidCode("pass");
                                        }
                                    } else if (result.Tip == "IP不允许访问" || result.Tip == "验证码错误") {
                                        result.Tip = result.Tip + ", 请输入验证码";
                                        $("#liErrorMsg").html(result.Tip);
                                        $("#liErrorMsg").show();

                                        if ($("#uloginPassportVerifyCodeLi").is(':hidden')) {
                                            changeValidCode("pass");
                                        }
                                    }

                                }

                            },

                            error: function (xhr) {
                                $("#login_submit").data("sfRuning", 0);
                                alert("请求出错(请检查相关度网络状况.)");
                            }
                        });
                    }
                }
            });
            isready = true;
        });

        //yin

        var isAble = false;// 验证页面可用 (默认不可用)

        var isAbleSendMessage = true;//“发送短信”可用 (默认可用)
        var isAbleValidateBtn = true;//“验证按钮”可用 (默认可用)

        var timeSendMessage = 0;//发送短信计时时间
        var clockSendMessage; //发送短信计时时钟

        $(function () {
            $("#str_message_a").on("click", function () {
                SendMessageToPhone();
            });
            Init_FormPhoneAndMessage_Validate();
        })

        //给电话发短信
        function SendMessageToPhone() {
            if (isAble && isAbleSendMessage) {//验证“全局”与“发送”按钮是否可用
                isAble = false;//全局禁止

                $("#ValidatePhoneErrorMsg").html("");
                $("#str_message").attr('data-rule-required', false)
                Init_FormPhoneAndMessage_Validate();
                if ($('#form_PhoneAndMessage').valid()) {//form验证通过

                    changeSendMessageDisable();//发送短信按钮变为禁用

                    var ajaxData = $("#form_PhoneAndMessage").serialize();
                    ajax_SendMessageToPhone(ajaxData);//ajax给电话发短信
                } else {
                    isAble = true;
                }
            }
        }

        //“验证”按钮  验证电话短信
        function ValidatePhoneAndMessage() {
            if (isAble && isAbleValidateBtn) {
                isAble = false;

                $("#ValidatePhoneErrorMsg").html("");
                $("#str_message").attr('data-rule-required', true)
                Init_FormPhoneAndMessage_Validate();
                if ($('#form_PhoneAndMessage').valid()) {
                    changeBtnDisable();

                    var ajaxData = $("#form_PhoneAndMessage").serialize();
                    ajax_ValidatePhone(ajaxData);
                } else {
                    isAble = true;
                }
            }
        }

        //初始化“电话短信Form”的验证属性
        function Init_FormPhoneAndMessage_Validate() {
            $("#form_PhoneAndMessage").validate({

                errorElement: 'label',
                errorClass: 'help-inline',
                highlight: function (element) {
                    $(element).addClass('errorInput');
                },
                unhighlight: function (element) {
                    $(element).removeClass('errorInput');
                },
                success: function (label) {
                    label.remove();
                },
                errorPlacement: function (error, element) {
                    if (element.attr("id") == "str_message") {
                        element = $("#str_message_a");
                    }
                    error.addClass('help-small no-left-padding').insertAfter(element);
                }
            });
        }


        //------------ajax-------------

        //ajax给电话发短信
        function ajax_SendMessageToPhone(ajaxData) {
            $.ajax({
                type: "post",
                url: '/ELogin/ELogin/SendMessageToPhone',
                data: ajaxData,
                success: function (result) {
                    if (result.Status == 0) {
                        if (result.Msg != "") {
                            $("#ValidatePhoneErrorMsg").html(result.Msg);
                        } else {
                            $("#ValidatePhoneErrorMsg").html("发送失败，请重新发送");
                        }
                        changeSendMessageAble();
                        isAble = true;
                        return;
                    }
                    StartTimeSendMessage();
                    isAble = true;
                },
                error: function () {
                    $("#ValidatePhoneErrorMsg").html("发送失败，请重新发送");
                    changeSendMessageAble();
                    isAble = true;
                }
            })
        }

        //验证
        function ajax_ValidatePhone(ajaxData) {
            $.ajax({
                type: "post",
                url: '/ELogin/ELogin/ValidatePhoneAndMessage',
                data: ajaxData,
                success: function (result) {
                    if (result.Status == 0) {
                        if (result.Msg != "") {
                            $("#ValidatePhoneErrorMsg").html(result.Msg);
                        } else {
                            $("#ValidatePhoneErrorMsg").html("验证失败，请重新验证");
                        }
                        changeBtnAble();
                        isAble = true;
                        return;
                    }
                    window.location = result.Url;
                },
                error: function () {
                    $("#ValidatePhoneErrorMsg").html("验证失败，请重新验证");
                    changeBtnAble();
                    isAble = true;
                }
            })
        }

        //邮箱用户登录form提交
        function ajax_form(ajaxData) {
            $.ajax({
                type: "post",
                url: '/ELogin/ELogin/DoLogin',
                data: ajaxData,
                success: function (result) {
                    if (result.Status != 1) {
                        if (result.Url != "") {
                            window.location = 'http://e.agent.fang.com/elogin' + result.Url;
                            return;
                        }
                    }
                    if (result.Status == 1) {
                        if (result.Url != "") {
                            window.location = result.Url;
                            return;
                        }

                        $("#form_PhoneAndMessage_UserName").val($("#str_username").val());
                        $("#form_PhoneAndMessage_Password").val($("#str_userpwd").val());
                        $("#formLogin").hide();
                        $("#form_PhoneAndMessage").show();
                        isAble = true;
                        return
                    }
                    alert("请求出错");
                },
                error: function () {
                    alert("请求出错");
                }
            })
        }


        //------------工具/辅助方法-------------

        //----计时工具

        //发送短信后 开始计时
        function StartTimeSendMessage() {
            timeSendMessage = 60;
            EndTimeSendMessage();
            clockSendMessage = setInterval("count()", 1000);
        }
        //结束计时
        function EndTimeSendMessage() {
            clearInterval(clockSendMessage);
        }
        //计数并改变页面显示的时间
        function count() {
            timeSendMessage--;
            if (timeSendMessage <= 0) {
                EndTimeSendMessage();//关闭时钟
                $("#str_message_a").html("发送短信验证码");
                changeSendMessageAble();//发送按钮变为可用
            } else {
                $("#str_message_a").html(timeSendMessage + "秒后重新发送");
            }
        }


        //----改变发送短信“a”标签状态
        function changeSendMessageAble() {//变为可用
            $("#str_message_a").removeClass('a_SendMessage_Disable');
            $("#str_message_a").addClass('a_SendMessage_Able');
            isAbleSendMessage = true;
        }
        function changeSendMessageDisable() {//变为不可用
            $("#str_message_a").removeClass('a_SendMessage_Able');
            $("#str_message_a").addClass('a_SendMessage_Disable');
            isAbleSendMessage = false;
        }

        //----改变“验证”按钮状态
        function changeBtnAble() {//变为可用
            $("#btn_ValidatePhoneAndMessage").removeClass("btn_disable");
            $("#btn_ValidatePhoneAndMessage").addClass("blue");
            isAbleValidateBtn = true;
        }
        function changeBtnDisable() {//变为不可用
            $("#btn_ValidatePhoneAndMessage").removeClass("blue");
            $("#btn_ValidatePhoneAndMessage").addClass("btn_disable");
            isAbleValidateBtn = false;
        }


    </script>


    <script type="text/javascript">

        //处理ajax输出html时，显示错误

        //判断是否已经处理过，已经处理过无论如何不再跳转，防止无限跳转
        var fae = window.location.href.indexOf("fae=1") > -1;//取得Get参数

        if ($("body.loginbk").length == 0 && !fae) {
            window.location = 'http://e.agent.fang.com/elogin' + '?fae=1&errorMsg=' + '请先登录';
        }
    </script>
    <script type="text/javascript">
        var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;

        if (!isChrome) {
            document.getElementById("ShiPei").style.display = "block";
        }

        function CloseShipei() {
            document.getElementById("ShiPei").style.display = "none";
        }


    </script>



</body></html>